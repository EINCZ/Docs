{
  "project": "EINCZ",
  "version": "1.0",
  "generated_at": "2025-12-01T00:00:00Z",
  "author": "EINCZ Core Team",
  "purpose": "Role & Governance configuration report for repository and public audit. Model 1: Full Governance Control (Timelock owns all admin roles).",
  "contracts": {
    "token": {
      "name": "EINCZ",
      "symbol": "EINCZ",
      "address": "0xf1cDA94f51B8757dd2C25b85eFbc8d4cF85656Ec",
      "explorer": "https://routescan.io/address/0xf1cDA94f51B8757dd2C25b85eFbc8d4cF85656Ec/contract/43114/code"
    },
    "multisig_safe": {
      "name": "Gnosis Safe (Master Treasury)",
      "address": "0x946C4392B557D43DBA9A37Ee082CB062360D1212",
      "notes": "Operational treasury multisig. Should NOT retain token admin roles after governance finalization."
    },
    "timelock": {
      "name": "Timelock Controller",
      "address": "0xa3f61e633275f6240FFc9cBB462093365655dEF4"
    },
    "governor": {
      "name": "Governor",
      "address": "0x645e50EB79769AF9f06290E3BB3773988E1fF6A1"
    },
    "staking_contract": {
      "address": "0xa1d702962A8b476849045300A0bB55958b778d35"
    }
  },
  "supply_and_balances_snapshot": {
    "total_supply": 746000000,
    "decimals": 18,
    "snapshot_date": "2025-12-01T00:00:00Z",
    "balances": {
      "multisig_safe": 634100000,
      "staking_contract": 111900000,
      "others": 0
    },
    "notes": "Balances sum matches total supply. Incentives & rewards were transferred to staking contract as designed."
  },
  "roles": {
    "role_hashes": {
      "DEFAULT_ADMIN_ROLE": "0x9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6",
      "MINTER_ROLE": "0x750555ed2187fef9a15b1b2d80b65634c266437a86c68f049ea8b5da4a2bd96d",
      "PAUSER_ROLE": "0x65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a",
      "BLACKLIST_ADMIN_ROLE": "0x...? (insert if different)"
    },
    "current_assignment": {
      "DEFAULT_ADMIN_ROLE": "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
      "MINTER_ROLE": [
        "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
        "Multisig (0x946C4392B557D43DBA9A37Ee082CB062360D1212)"
      ],
      "PAUSER_ROLE": [
        "Multisig (0x946C4392B557D43DBA9A37Ee082CB062360D1212)"
      ],
      "BLACKLIST_ADMIN_ROLE": [
        "Multisig (0x946C4392B557D43DBA9A37Ee082CB062360D1212)"
      ]
    },
    "target_assignment_model_1": {
      "DEFAULT_ADMIN_ROLE": "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
      "MINTER_ROLE": "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
      "PAUSER_ROLE": "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
      "BLACKLIST_ADMIN_ROLE": "Timelock (0xa3f61e633275f6240FFc9cBB462093365655dEF4)",
      "multisig": "No roles (operational treasury only)"
    }
  },
  "required_operations": [
    {
      "step": 1,
      "description": "Grant PAUSER_ROLE to Timelock (if not already granted).",
      "call": {
        "function": "grantRole(bytes32 role, address account)",
        "params": [
          "PAUSER_ROLE (hash above)",
          "0xa3f61e633275f6240FFc9cBB462093365655dEF4"
        ]
      },
      "recommended_execution": "Multisig -> Contract Interaction (safe.app) OR a governance proposal if multisig lacks permission",
      "precondition": "multisig must have DEFAULT_ADMIN_ROLE or timelock must be used via governance to execute grant"
    },
    {
      "step": 2,
      "description": "Grant BLACKLIST_ADMIN_ROLE to Timelock (if not already granted).",
      "call": {
        "function": "grantRole(bytes32 role, address account)",
        "params": [
          "BLACKLIST_ADMIN_ROLE (hash above)",
          "0xa3f61e633275f6240FFc9cBB462093365655dEF4"
        ]
      },
      "recommended_execution": "Multisig -> Contract Interaction (safe.app) OR a governance proposal if multisig lacks permission"
    },
    {
      "step": 3,
      "description": "Revoke MINTER_ROLE from Multisig.",
      "call": {
        "function": "revokeRole(bytes32 role, address account)",
        "params": [
          "MINTER_ROLE (0x750555ed...bd96d)",
          "0x946C4392B557D43DBA9A37Ee082CB062360D1212"
        ]
      },
      "important_note": "If multisig no longer has DEFAULT_ADMIN_ROLE, this must be executed via a governance proposal queued/executed by the Timelock."
    },
    {
      "step": 4,
      "description": "Revoke PAUSER_ROLE from Multisig.",
      "call": {
        "function": "revokeRole(bytes32 role, address account)",
        "params": [
          "PAUSER_ROLE (hash above)",
          "0x946C4392B557D43DBA9A37Ee082CB062360D1212"
        ]
      }
    },
    {
      "step": 5,
      "description": "Revoke BLACKLIST_ADMIN_ROLE from Multisig.",
      "call": {
        "function": "revokeRole(bytes32 role, address account)",
        "params": [
          "BLACKLIST_ADMIN_ROLE (hash above)",
          "0x946C4392B557D43DBA9A37Ee082CB062360D1212"
        ]
      }
    },
    {
      "step": 6,
      "description": "Revoke DEFAULT_ADMIN_ROLE from Multisig (if present).",
      "call": {
        "function": "revokeRole(bytes32 role, address account)",
        "params": [
          "DEFAULT_ADMIN_ROLE (0x9f2df0fe...a6)",
          "0x946C4392B557D43DBA9A37Ee082CB062360D1212"
        ]
      },
      "caveat": "This is a critical operation. Ensure Timelock has been configured to be the sole DEFAULT_ADMIN_ROLE prior to attempt; otherwise future admin tasks will be impossible without governance."
    }
  ],
  "execution_guidance": {
    "governance_flow": "If the multisig no longer holds DEFAULT_ADMIN_ROLE, all revoke/grant operations must be performed via a governance proposal submitted to the Governor contract, queued, and executed through the Timelock. This ensures timelock-enforced delays and auditability.",
    "safe_ui_instructions": "Use Apps -> Contract Interaction -> supply token contract address and ABI for grantRole/revokeRole. Simulate before sending. If simulation fails, check which caller is allowed (simulate often fails when caller lacks DEFAULT_ADMIN_ROLE).",
    "transparency_recommendation": "After each on-chain operation, update this file's 'executed_transactions' array with tx hash, block number, timestamp and short description."
  },
  "executed_transactions": [
    {
      "step": null,
      "description": "Populate after execution.",
      "tx_hash": null,
      "block_number": null,
      "timestamp": null,
      "executor": null,
      "notes": null
    }
  ],
  "post_actions_and_verifications": {
    "verify_commands": [
      {
        "description": "Check role assignment via node one-liner (replace roleHash/addr as needed)",
        "command": "node -e \"const ethers=require('ethers'); (async()=>{ const p=new ethers.JsonRpcProvider('https://api.avax.network/ext/bc/C/rpc'); const token=new ethers.Contract('0xf1cDA94f51B8757dd2C25b85eFbc8d4cF85656Ec',['function hasRole(bytes32,address) view returns(bool)'],p); console.log('timelock MINTER:', await token.hasRole('0x750555ed2187fef9a15b1b2d80b65634c266437a86c68f049ea8b5da4a2bd96d','0xa3f61e633275f6240FFc9cBB462093365655dEF4')); console.log('multisig MINTER:', await token.hasRole('0x750555ed2187fef9a15b1b2d80b65634c266437a86c68f049ea8b5da4a2bd96d','0x946C4392B557D43DBA9A37Ee082CB062360D1212')); })()\""
      }
    ],
    "expected_results": [
      "timelock MINTER: true",
      "multisig MINTER: false"
    ]
  },
  "disclaimer": "This file is a security & governance configuration artifact intended for public audit and transparency. Execute the recommended steps only after confirming caller permissions and governance requirements. Team assumes responsibility for on-chain actions. Keep private keys and multisig signers secure."
}
